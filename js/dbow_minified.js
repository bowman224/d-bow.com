var DBOW={},processingBound=!1;function bindJavascript(){var b=Processing.getInstanceById("ball-pit-canvas");null!=b&&(b.bindJavascript(this),processingBound=!0);processingBound||setTimeout(bindJavascript,250)}function recordHit(b){DBOW.Game.recordHit(b)}function resetGame(b){DBOW.Game.resetGame(b)}function storeId(b){DBOW.Game.storeId(b)}function startCountdown(){DBOW.Game.startCountdown()}
(function(){var b=window.location.hash;DBOW.Util=function(){var f={},c="#about-content",d="li.about",e={"#About":"#33CCFF","#Projects":"#FFCC00","#Resume":"#D53817","#Contact":"#8265A2"};f.showContent=function(){$(c).removeClass("displayed");$(d).removeClass("displayed-nav");$("#game-content").hide();switch(b){case "#About":c="#about-content";d="li.about";$("#game-content").show();break;case "#Projects":c="#projects-content";d="li.projects";break;case "#Resume":c="#resume-content";d="li.resume";break;
case "#Contact":c="#contact-content";d="li.contact";break;default:c="#about-content",d="li.about",$("#game-content").show()}$(d).addClass("displayed-nav");$(c).addClass("displayed").find("a").hover(function(){$(this).css("color",e[b])},function(){$(this).css("color","#FFF")})};return f}();DBOW.Game=function(){function b(a,j){$.post("/highscore",{initials:a,score:j,gameId:i},function(a){a&&(a=$.parseJSON(a),a.error||c.updateHighScores(a))})}var c={},d,e=0,h,g=0,i;c.recordHit=function(a){a===h&&(e++,
$("#game-score").text(e))};c.resetGame=function(a){a===h&&(e>=d&&e>=g&&($(document).off("click","#game-submit"),g=e,$("#game-high-score").text(g),$("#game-winner").show(),$(document).on("click","#game-submit",function(){var a=$("#game-initials").val();""!==a&&3>=a.length?(b(a,g),$("#game-winner").hide(),$("#game-validation").hide(),$("#game-initials").val(""),$(document).off("click","#game-submit"),g=0):$("#game-validation").show()})),e=0,$("#game-score").text(e))};c.storeId=function(a){h||(h=a)};
c.updateHighScores=function(a){var b=a.length,d,e,f="";$("#game-scores-list").html("");for(d=0;d<b;d++)e=a[d],scoreItem='<li><span class="game-score">'+e.score+'</span><span class="game-name">'+e.initials+"</span></li>",f+=scoreItem;$("#game-scores-list").html(f);c.setLowestHighScore(a[b-1].score)};c.setLowestHighScore=function(a){d=a};c.startCountdown=function(){var a=5,b;b=setInterval(function(){c.countdownTimer(a);a-=1;0>a&&(clearInterval(b),$("#game-countdown").hide())},1E3)};c.countdownTimer=
function(a){$("#game-countdown").show();$("#game-countdown > span").text(a)};c.setGameId=function(a){$.get("/game",{game_key:a},function(a){a&&(a=$.parseJSON(a),a.game_id&&(i=a.game_id))})};return c}();DBOW.Setup=function(){return{interactions:function(){$(document).on("click","a.nav-link",function(f){b=f.currentTarget.hash;DBOW.Util.showContent(b);_gaq.push(["_trackPageview",b])});$(document).on("click","a.blog-link",function(){_gaq.push(["_trackPageview","#Blog"])});$(document).on("click",'a:not(".nav-link"):not(".blog-link")',
function(){_gaq.push(["_trackEvent","Outbound Link",$(this).attr("href")])});$("#game-start").one("click",function(){var b=Processing.getInstanceById("ball-pit-canvas");null!=b&&(b.startGame(),$("#game-play").show(),$("#game-start").hide())});$("#game-content").show()}}}();$(function(){DBOW.Setup.interactions();DBOW.Util.showContent(b);bindJavascript()})})();